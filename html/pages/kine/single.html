{{define "kine-single"}}

{{template "head" .Head}}
{{template "top" .}}

    <div id="part">
    {{template "kine-single-part" .}}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    {{template "bot" .Head}}

{{end}}}

{{define "kine-single-part"}}

    {{template "subnav" (snav .Entry.Parent .Entry.Id .Head.Lang)}}
    {{$eL := eL .Entry .Head.Lang}}
    <div id="body">
      <h1 class="video-title-bar">
        <span class="video-date">
          {{.Entry.Date.Format "2"}}
          {{abbr (monthLang .Entry.Date $.Head.Lang)}}
        </span>
        <span class="video-title">
        {{.Entry.Info.Field "title-display" .Head.Lang}}
        </span>
      </h1>
          {{template "kine-entry" $eL}}
    </div>

  {{if isLocal}}
  <div class="margin">
  {{template "edit-link" $eL}}
  </div>
  {{end}}

{{end}}

{{define "kine-date" -}}
{{.E.Date.Format "2"}} {{abbr (monthLang .Entry.Date .L)}}
{{- end}}

{{define "kine-entry"}}
{{$type := $.E.Type}}
    {{if eq $type "set"}}
      {{template "kine-set" .}}
    {{else if eq $type "video"}}
      {{template "kine-video" .}}
    {{else}}
      {{template "entry" .}}
    {{end}}
{{end}}

{{define "kine-set"}}
<div class="set">
    {{range .E.Entries}}
      {{template "kine-entry" (eL . $.L)}}
    {{end}}
</div>
{{end}}

{{define "kine-video"}}
      {{template "entry" .}}
  {{with .E.Transcript}}

  {{$text := index .Langs $.L}}
  {{if $text}}
  <div class="transcript transcript-kine column">
    <h3>{{var "transcript" $.L}}</h3>
    <div class="{{$.E.Info.TextStyle}}">
      {{$text}}
    </div>
    {{template "footnotes" (nL .Footnotes $.L)}}
  </div>
  {{end}}
  {{end}}
{{end}}
