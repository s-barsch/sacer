{{define "kine-single"}}

{{template "head" .Meta}}
{{template "top" .}}

    <div id="part">
    {{template "kine-single-part" .}}
    </div>

    {{template "bot" .Meta}}

{{end}}}

{{define "kine-single-part"}}

    {{template "subnav" (snav .Entry.Parent .Entry.Id .Meta.Lang)}}

    {{$eL := eL .Entry .Meta.Lang}}
    <div id="body">
      <h1 class="video-title-bar">
        <span class="video-date">
          {{.Entry.Date.Format "2"}}
          {{abbr (monthLang .Entry.Date $.Meta.Lang)}}
        </span>
        <span class="video-title">
        {{.Entry.Info.Field "title-display" .Meta.Lang}}
        </span>
      </h1>
          {{template "kine-entry" $eL}}
    </div>

    <!--
    <div class="video-grid">
    {{/* range .Neighbors}}
    {{template "kine-card" eL . $.Meta.Lang}}
    {{end */}}
    </div>
    -->

  {{if isLocal}}
  <div class="margin">
  {{template "edit-link" $eL}}
  </div>
  {{end}}

{{end}}

{{define "kine-date" -}}
{{.E.Date.Format "2"}} {{abbr (monthLang .Entry.Date .L)}}
{{- end}}

{{define "kine-entry"}}
{{$type := $.E.Type}}
    {{if eq $type "set"}}
      {{template "kine-set" .}}
    {{else if or (eq $type "video") (eq $type "audio")}}
      {{template "kine-av" .}}
    {{else}}
      {{template "entry" .}}
    {{end}}
{{end}}

{{define "kine-set"}}
<div class="set">
    {{range .E.Entries}}
      {{template "kine-entry" (eL . $.L)}}
    {{end}}
</div>
{{end}}

{{define "kine-av"}}
{{if eq .E.Type "audio"}}
  <div class="column kine-audio">
    {{template "entry" .}}
  </div>
{{else}}
  {{template "entry" .}}
{{end}}

  {{template "kine-transcript" .}}

{{end}}

{{define "kine-transcript"}}
  {{with .E.Transcript}}
    {{$text := index .Langs $.L}}
    {{if $text}}
    <div class="transcript transcript-kine column">
      <h3>{{var "transcript" $.L}}</h3>
      <div class="{{$.E.Info.TextStyle}}">
        {{$text}}
      </div>
      {{template "footnotes" (nL .Footnotes $.L)}}
    </div>
    {{end}}
  {{end}}
{{end}}
