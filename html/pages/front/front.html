{{define "front"}}
{{template "head" .Head}}

{{template "top" .}}


<!--
  <h4 class="front-lead">{{var "front-lead" .Head.Lang}}</h4>

  <div></div>
-->

  <div class="cols">
    <div class="col__content col--index">
    {{template "index-col" .}}
    </div>
    <div class="col__content">
    {{template "graph-col" .}}
    </div>

  </div>




{{template "bot" .Head}}
{{end}}

  
{{define "index-col" -}}
<div>
      <h3 class="front-title"><a href="/index/">Index</a></h3>
      {{range .Index.Offset 0 5}}
      {{template "front-index-entry" (eL . $.Head.Lang)}}
      {{end}}
      {{/*
        {{range .Index.Offset 4 15}}
        <div class="desktop">
            {{template "front-index-entry" (eL . $.Head.Lang)}}
        </div>
        {{end}}
      */}}
      <div class="more-tip">
          {{var "index-more" .Head.Lang}}
      </div>
</div>
{{- end}}

{{define "graph-col" -}}
<div>
      <h3 class="front-title"><a href="/graph/">Graph</a></h3>
      {{template "media-groups-front" (esL (.Graph.Offset 0 5) .Head.Lang)}}
      <div class="more-tip">
      {{var "graph-more" .Head.Lang}}
      </div>
</div>
{{- end}}

{{define "more-tip"}}
<div class="more-tip">
  {{.}}
</div>
{{end}}

{{define "tip"}}
<div class="tip">
  {{.}}
</div>
{{end}}


{{define "media-groups-front"}}
    {{$total := 0}}

    <div class="media-groups">
    {{range $i, $group := .Es.Groups}}
      <section class="{{if $group.First.IsBlob}}blob{{else}}tob{{end}}-group">
        {{range $j, $e := $group}}

            {{$total = add $total 1}}
            <div {{if (gt $total 6)}}class="desktop"{{end}}>
            {{template "graph-front-entry" (eL $e $.L)}}
            </div>

        {{end}}
      </section>
    {{end}}
    </div>

{{end}}


{{define "graph-front-entry"}}
    {{if .E.IsBlob}}
        {{template "graph-blob" .}}
    {{else}}
      <article class="tob tob--front">
        {{template "graph-tob" .}}
      </article>
    {{end}}
{{end}}


